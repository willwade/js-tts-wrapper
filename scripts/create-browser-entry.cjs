const fs = require('node:fs');
const path = require('node:path');

const distDir = path.resolve(__dirname, '..', 'dist');
const esmModulePath = 'esm/browser.js';
const esmTypePath = 'esm/browser';

const jsStubPath = path.join(distDir, 'browser.js');
const dtsStubPath = path.join(distDir, 'browser.d.ts');

const banner = `/**
 * Browser entry stub generated by create-browser-entry.cjs
 *
 * This keeps the published browser entry pointing at the ESM build,
 * so relative imports continue to resolve under dist/esm.
 */
`;

const jsContent = `${banner}export * from "./${esmModulePath}";
`;
const dtsContent = `${banner}export * from "./${esmTypePath}";
`;

fs.writeFileSync(jsStubPath, jsContent, 'utf8');
fs.writeFileSync(dtsStubPath, dtsContent, 'utf8');
