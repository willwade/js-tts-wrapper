const fs = require('fs');
const path = require('path');

const sourceJsonPath = path.resolve(__dirname, '../src/engines/sherpaonnx/merged_models.json');
const targetTsPath = path.resolve(__dirname, '../src/engines/sherpaonnx/generated_models.ts');

try {
  // Read the JSON file
  const jsonData = fs.readFileSync(sourceJsonPath, 'utf-8');

  // Parse the JSON data
  const modelsObject = JSON.parse(jsonData);

  // Create the TypeScript file content
  const tsContent = `// This file is generated automatically by scripts/generate-models-ts.js
// Do not edit this file manually.

export const SHERPA_MODELS_CONFIG = ${JSON.stringify(modelsObject, null, 2)};
`;

  // Write the TypeScript file
  fs.writeFileSync(targetTsPath, tsContent, 'utf-8');

  console.log(`Successfully generated ${path.basename(targetTsPath)}`);

} catch (error) {
  console.error(`Error generating models TypeScript file: ${error}`);
  process.exit(1);
}
